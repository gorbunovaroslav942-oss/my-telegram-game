<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tamagotchi Game</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { 
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; 
            background: #e5e9f0; 
            text-align: center; 
            margin: 0; 
            padding: 20px; 
            user-select: none;
        }
        .stat-card { 
            background: white; 
            border-radius: 20px; 
            padding: 15px; 
            margin-bottom: 20px; 
            box-shadow: 0 4px 15px rgba(0,0,0,0.05); 
        }
        .pet-container { 
            margin: 40px 0; 
            min-height: 200px; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            position: relative;
        }
        .pet-image { 
            width: 200px; 
            height: auto; 
            /* –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ–∫–∞—á–∏–≤–∞–Ω–∏—è */
            animation: float 3s ease-in-out infinite;
            /* –£–ª—É—á—à–µ–Ω–Ω–∞—è —Ç–µ–Ω—å –∏–º–µ–Ω–Ω–æ –ø–æ–¥ —Ñ–æ—Ä–º–æ–π –∫–æ—Ç–∞ */
            filter: drop-shadow(0 10px 15px rgba(0,0,0,0.1));
        }
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-15px); }
            100% { transform: translateY(0px); }
        }
        .btn-grid { 
            display: grid; 
            grid-template-columns: 1fr 1fr; 
            gap: 12px; 
            max-width: 400px;
            margin: 0 auto;
        }
        button { 
            padding: 18px; 
            border: none; 
            border-radius: 15px; 
            background: #0088cc; 
            color: white; 
            font-size: 14px;
            font-weight: bold; 
            cursor: pointer; 
            transition: transform 0.1s, background 0.2s;
        }
        button:active { transform: scale(0.95); }
        button:disabled { background: #adb5bd; }
        #clean-btn { background: #ff9800; grid-column: span 2; }
        
        .status-text { font-size: 0.9em; color: #666; margin-top: 5px; }
        b { color: #0088cc; }
    </style>
</head>
<body>

    <div class="stat-card">
        <h3>–ë–∞–ª–∞–Ω—Å: <span id="money">100</span> üêæ</h3>
        <div class="status-text">
            –°—ã—Ç–æ—Å—Ç—å: <b id="hunger">100</b>% | –ß–∏—Å—Ç–æ—Ç–∞: <b id="clean">100</b>%
        </div>
    </div>

    <div class="pet-container">
        <img id="pet-img" src="cat.png" alt="–ú–æ–π –∫–æ—Ç" class="pet-image">
    </div>

    <div class="btn-grid">
        <button onclick="action('feed')">–ö–æ—Ä–º–∏—Ç—å (10üêæ)</button>
        <button onclick="action('play')">–ò–≥—Ä–∞—Ç—å (+15üêæ)</button>
        <button onclick="action('wash')">–ü–æ–º—ã—Ç—å (5üêæ)</button>
        <button onclick="cleanPoo()" id="clean-btn" style="display:none;">–£–±—Ä–∞—Ç—å üí© –∏ –ø–æ–º—ã—Ç—å</button>
    </div>

    <script>
        let tg = window.Telegram.WebApp;
        tg.expand();

        // –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã (–≤ –±—É–¥—É—â–µ–º –º–æ–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –≤ –±–∞–∑—É)
        let state = { 
            money: 100, 
            hunger: 100, 
            clean: 100, 
            hasPoo: false 
        };

        function updateUI() {
            document.getElementById('money').innerText = state.money;
            document.getElementById('hunger').innerText = Math.floor(state.hunger);
            document.getElementById('clean').innerText = Math.floor(state.clean);
            
            // –í–∏–∑—É–∞–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã —Å–æ—Å—Ç–æ—è–Ω–∏—è
            const img = document.getElementById('pet-img');
            if (state.hunger < 30) {
                img.style.filter = "grayscale(50%) drop-shadow(0 10px 15px rgba(0,0,0,0.1))";
            } else {
                img.style.filter = "grayscale(0%) drop-shadow(0 10px 15px rgba(0,0,0,0.1))";
            }

            // –ö–Ω–æ–ø–∫–∞ —É–±–æ—Ä–∫–∏ –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –≥—Ä—è–∑–Ω–æ
            document.getElementById('clean-btn').style.display = state.hasPoo ? 'block' : 'none';
        }

        function action(type) {
            if (type === 'feed') {
                if (state.money >= 10) {
                    state.money -= 10;
                    state.hunger = Math.min(100, state.hunger + 25);
                    tg.HapticFeedback.impactOccurred('light');
                }
            } else if (type === 'wash') {
                if (state.money >= 5) {
                    state.money -= 5;
                    state.clean = 100;
                    tg.HapticFeedback.notificationOccurred('success');
                }
            } else if (type === 'play') {
                state.money += 15;
                state.hunger = Math.max(0, state.hunger - 10);
                tg.HapticFeedback.impactOccurred('medium');
            }
            updateUI();
        }

        function cleanPoo() {
            state.hasPoo = false;
            state.clean = 100;
            tg.HapticFeedback.notificationOccurred('success');
            updateUI();
        }

        // –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª (–∫–∞–∂–¥—ã–µ 4 —Å–µ–∫—É–Ω–¥—ã)
        setInterval(() => {
            state.hunger = Math.max(0, state.hunger - 1.5);
            
            // –®–∞–Ω—Å —Ç–æ–≥–æ, —á—Ç–æ –ø–∏—Ç–æ–º–µ—Ü –Ω–∞–ø–∞—á–∫–∞–µ—Ç
            if (Math.random() > 0.85 && !state.hasPoo) {
                state.hasPoo = true;
            }

            if (state.hasPoo) {
                state.clean = Math.max(0, state.clean - 4);
            }

            updateUI();
        }, 4000);

        updateUI();
    </script>
</body>
</html>
